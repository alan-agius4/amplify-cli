3b857cbf69d3b89741c1aeea134f69ac
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const graphql_1 = require("graphql");
const graphql_transformer_core_1 = require("graphql-transformer-core");
const DynamoDBModelTransformer_1 = require("../DynamoDBModelTransformer");
test('Test DynamoDBModelTransformer validation happy case', () => {
    const validSchema = `
    type Post @model {
        id: ID!
        title: String!
        createdAt: String
        updatedAt: String
    }
    `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
});
test('Test DynamoDBModelTransformer with query overrides', () => {
    const validSchema = `type Post @model(queries: { get: "customGetPost", list: "customListPost" }) {
        id: ID!
        title: String!
        createdAt: String
        updatedAt: String
    }
    `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const createPostInput = getInputType(parsed, 'CreatePostInput');
    expectFieldsOnInputType(createPostInput, ['id', 'title', 'createdAt', 'updatedAt']);
    // This id should always be optional.
    // aka a named type node aka name.value would not be set if it were a non null node
    const idField = createPostInput.fields.find(f => f.name.value === 'id');
    expect(idField.type.name.value).toEqual('ID');
    const queryType = getObjectType(parsed, 'Query');
    expect(queryType).toBeDefined();
    expectFields(queryType, ['customGetPost']);
    expectFields(queryType, ['customListPost']);
    const subscriptionType = getObjectType(parsed, 'Subscription');
    expect(subscriptionType).toBeDefined();
    expectFields(subscriptionType, ['onCreatePost', 'onUpdatePost', 'onDeletePost']);
    const subField = subscriptionType.fields.find(f => f.name.value === 'onCreatePost');
    expect(subField.directives.length).toEqual(1);
    expect(subField.directives[0].name.value).toEqual('aws_subscribe');
});
test('Test DynamoDBModelTransformer with mutation overrides', () => {
    const validSchema = `type Post @model(mutations: { create: "customCreatePost", update: "customUpdatePost", delete: "customDeletePost" }) {
        id: ID!
        title: String!
        createdAt: String
        updatedAt: String
    }
    `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const mutationType = getObjectType(parsed, 'Mutation');
    expect(mutationType).toBeDefined();
    expectFields(mutationType, ['customCreatePost', 'customUpdatePost', 'customDeletePost']);
});
test('Test DynamoDBModelTransformer with only create mutations', () => {
    const validSchema = `type Post @model(mutations: { create: "customCreatePost" }) {
        id: ID!
        title: String!
        createdAt: String
        updatedAt: String
    }
    `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const mutationType = getObjectType(parsed, 'Mutation');
    expect(mutationType).toBeDefined();
    expectFields(mutationType, ['customCreatePost']);
    doNotExpectFields(mutationType, ['updatePost']);
});
test('Test DynamoDBModelTransformer with multiple model directives', () => {
    const validSchema = `
    type Post @model {
        id: ID!
        title: String!
        createdAt: String
        updatedAt: String
    }

    type User @model {
        id: ID!
        name: String!
    }
    `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const queryType = getObjectType(parsed, 'Query');
    expect(queryType).toBeDefined();
    expectFields(queryType, ['listPosts']);
    expectFields(queryType, ['listUsers']);
    const stringInputType = getInputType(parsed, 'ModelStringFilterInput');
    expect(stringInputType).toBeDefined();
    const booleanInputType = getInputType(parsed, 'ModelBooleanFilterInput');
    expect(booleanInputType).toBeDefined();
    const intInputType = getInputType(parsed, 'ModelIntFilterInput');
    expect(intInputType).toBeDefined();
    const floatInputType = getInputType(parsed, 'ModelFloatFilterInput');
    expect(floatInputType).toBeDefined();
    const idInputType = getInputType(parsed, 'ModelIDFilterInput');
    expect(idInputType).toBeDefined();
    const postInputType = getInputType(parsed, 'ModelPostFilterInput');
    expect(postInputType).toBeDefined();
    const userInputType = getInputType(parsed, 'ModelUserFilterInput');
    expect(userInputType).toBeDefined();
    expect(verifyInputCount(parsed, 'ModelStringFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelBooleanFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelIntFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelFloatFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelIDFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelPostFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelUserFilterInput', 1)).toBeTruthy();
});
test('Test DynamoDBModelTransformer with filter', () => {
    const validSchema = `
    type Post @model {
        id: ID!
        title: String!
        createdAt: String
        updatedAt: String
    }`;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const queryType = getObjectType(parsed, 'Query');
    expect(queryType).toBeDefined();
    expectFields(queryType, ['listPosts']);
    const connectionType = getObjectType(parsed, 'ModelPostConnection');
    expect(connectionType).toBeDefined();
    expect(verifyInputCount(parsed, 'ModelStringFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelBooleanFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelIntFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelFloatFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelIDFilterInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'ModelPostFilterInput', 1)).toBeTruthy();
});
test('Test DynamoDBModelTransformer with mutations set to null', () => {
    const validSchema = `type Post @model(mutations: null) {
          id: ID!
          title: String!
          createdAt: String
          updatedAt: String
      }
      `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const mutationType = getObjectType(parsed, 'Mutation');
    expect(mutationType).not.toBeDefined();
});
test('Test DynamoDBModelTransformer with queries set to null', () => {
    const validSchema = `type Post @model(queries: null) {
          id: ID!
          title: String!
          createdAt: String
          updatedAt: String
      }
      `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const mutationType = getObjectType(parsed, 'Mutation');
    expect(mutationType).toBeDefined();
    const queryType = getObjectType(parsed, 'Query');
    expect(queryType).not.toBeDefined();
});
test('Test DynamoDBModelTransformer with subscriptions set to null', () => {
    const validSchema = `type Post @model(subscriptions: null) {
          id: ID!
          title: String!
          createdAt: String
          updatedAt: String
      }
      `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const mutationType = getObjectType(parsed, 'Mutation');
    expect(mutationType).toBeDefined();
    const queryType = getObjectType(parsed, 'Query');
    expect(queryType).toBeDefined();
    const subscriptionType = getObjectType(parsed, 'Subscription');
    expect(subscriptionType).not.toBeDefined();
});
test('Test DynamoDBModelTransformer with queries and mutations set to null', () => {
    const validSchema = `type Post @model(queries: null, mutations: null, subscriptions: null) {
          id: ID!
          title: String!
          createdAt: String
          updatedAt: String
      }
      `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const mutationType = getObjectType(parsed, 'Mutation');
    expect(mutationType).not.toBeDefined();
    const queryType = getObjectType(parsed, 'Query');
    expect(queryType).not.toBeDefined();
    const subscriptionType = getObjectType(parsed, 'Subscription');
    expect(subscriptionType).not.toBeDefined();
});
test('Test DynamoDBModelTransformer with advanced subscriptions', () => {
    const validSchema = `type Post @model(subscriptions: {
            onCreate: ["onFeedUpdated", "onCreatePost"],
            onUpdate: ["onFeedUpdated"],
            onDelete: ["onFeedUpdated"]
        }) {
          id: ID!
          title: String!
          createdAt: String
          updatedAt: String
      }
      `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const subscriptionType = getObjectType(parsed, 'Subscription');
    expect(subscriptionType).toBeDefined();
    expectFields(subscriptionType, ['onFeedUpdated', 'onCreatePost']);
    const subField = subscriptionType.fields.find(f => f.name.value === 'onFeedUpdated');
    expect(subField.directives.length).toEqual(1);
    expect(subField.directives[0].name.value).toEqual('aws_subscribe');
    const mutationsList = subField.directives[0].arguments.find(a => a.name.value === 'mutations').value;
    const mutList = mutationsList.values.map((v) => v.value);
    expect(mutList.length).toEqual(3);
    expect(mutList).toContain('createPost');
    expect(mutList).toContain('updatePost');
    expect(mutList).toContain('deletePost');
});
test('Test DynamoDBModelTransformer with non-model types and enums', () => {
    const validSchema = `
    type Post @model {
        id: ID!
        title: String!
        createdAt: String
        updatedAt: String
        metadata: [PostMetadata!]!
        appearsIn: [Episode]!
    }
    type PostMetadata {
        tags: Tag
    }
    type Tag {
        published: Boolean
        metadata: PostMetadata
    }
    enum Episode {
        NEWHOPE
        EMPIRE
        JEDI
    }
    `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const postMetaDataInputType = getInputType(parsed, 'PostMetadataInput');
    expect(postMetaDataInputType).toBeDefined();
    const tagInputType = getInputType(parsed, 'TagInput');
    expect(tagInputType).toBeDefined();
    expectFieldsOnInputType(tagInputType, ['metadata']);
    const createPostInputType = getInputType(parsed, 'CreatePostInput');
    expectFieldsOnInputType(createPostInputType, ['metadata', 'appearsIn']);
    const updatePostInputType = getInputType(parsed, 'UpdatePostInput');
    expectFieldsOnInputType(updatePostInputType, ['metadata', 'appearsIn']);
    const postModelObject = getObjectType(parsed, 'Post');
    const postMetaDataInputField = getFieldOnInputType(createPostInputType, 'metadata');
    const postMetaDataField = getFieldOnObjectType(postModelObject, 'metadata');
    // this checks that the non-model type was properly "unwrapped", renamed, and "rewrapped"
    // in the generated CreatePostInput type - its types should be the same as in the Post @model type
    verifyMatchingTypes(postMetaDataInputField.type, postMetaDataField.type);
    expect(verifyInputCount(parsed, 'PostMetadataInput', 1)).toBeTruthy();
    expect(verifyInputCount(parsed, 'TagInput', 1)).toBeTruthy();
});
test('Test DynamoDBModelTransformer with mutation input overrides when mutations are disabled', () => {
    const validSchema = `type Post @model(mutations: null) {
        id: ID!
        title: String!
        createdAt: String
        updatedAt: String
    }
    input CreatePostInput {
        different: String
    }
    input UpdatePostInput {
        different2: String
    }
    input DeletePostInput {
        different3: String
    }
    `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const createPostInput = getInputType(parsed, 'CreatePostInput');
    expectFieldsOnInputType(createPostInput, ['different']);
    const updatePostInput = getInputType(parsed, 'UpdatePostInput');
    expectFieldsOnInputType(updatePostInput, ['different2']);
    const deletePostInput = getInputType(parsed, 'DeletePostInput');
    expectFieldsOnInputType(deletePostInput, ['different3']);
});
test('Test DynamoDBModelTransformer with mutation input overrides when mutations are enabled', () => {
    const validSchema = `type Post @model {
        id: ID!
        title: String!
        createdAt: String
        updatedAt: String
    }
    # User defined types always take precedence.
    input CreatePostInput {
        different: String
    }
    input UpdatePostInput {
        different2: String
    }
    input DeletePostInput {
        different3: String
    }
    `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const createPostInput = getInputType(parsed, 'CreatePostInput');
    expectFieldsOnInputType(createPostInput, ['different']);
    const updatePostInput = getInputType(parsed, 'UpdatePostInput');
    expectFieldsOnInputType(updatePostInput, ['different2']);
    const deletePostInput = getInputType(parsed, 'DeletePostInput');
    expectFieldsOnInputType(deletePostInput, ['different3']);
});
test('Test non model objects contain id as a type for fields', () => {
    const validSchema = `
    type Post @model {
      id: ID!
      comments: [Comment]
    }
    type Comment {
      id: String!
      text: String!
    }
  `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    const definition = out.schema;
    expect(definition).toBeDefined();
    const parsed = graphql_1.parse(definition);
    const commentInput = getInputType(parsed, 'CommentInput');
    expectFieldsOnInputType(commentInput, ['id', 'text']);
    const commentObject = getObjectType(parsed, 'Comment');
    const commentInputObject = getInputType(parsed, 'CommentInput');
    const commentObjectIDField = getFieldOnObjectType(commentObject, 'id');
    const commentInputIDField = getFieldOnInputType(commentInputObject, 'id');
    verifyMatchingTypes(commentObjectIDField.type, commentInputIDField.type);
});
test('Test schema includes attribute enum when only queries specified', () => {
    const validSchema = `
    type Entity @model(mutations: null, subscriptions: null) {
      id: ID!
      str: String
    }
  `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
        transformConfig: {
            Version: 5,
        },
    });
    const result = transformer.transform(validSchema);
    expect(result).toBeDefined();
    expect(result.schema).toBeDefined();
    expect(result.schema).toMatchSnapshot();
});
test('Test only get does not generate superfluous input and filter types', () => {
    const validSchema = `
  type Entity @model(mutations: null, subscriptions: null, queries: {get: "getEntity"}) {
    id: ID!
    str: String
  }
  `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
        transformConfig: {
            Version: 5,
        },
    });
    const result = transformer.transform(validSchema);
    expect(result).toBeDefined();
    expect(result.schema).toBeDefined();
    expect(result.schema).toMatchSnapshot();
});
test('Test timestamp parameters when generating resolvers and output schema', () => {
    const validSchema = `
  type Post @model(timestamps: { createdAt: "createdOn", updatedAt: "updatedOn"}) {
    id: ID!
    str: String
  }
  `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const result = transformer.transform(validSchema);
    expect(result).toBeDefined();
    expect(result.schema).toBeDefined();
    expect(result.schema).toMatchSnapshot();
    expect(result.resolvers['Mutation.createPost.req.vtl']).toMatchSnapshot();
    expect(result.resolvers['Mutation.updatePost.req.vtl']).toMatchSnapshot();
});
test('Test resolver template not to auto generate createdAt and updatedAt when the type in schema is not AWSDateTime', () => {
    const validSchema = `
  type Post @model {
    id: ID!
    str: String
    createdAt: AWSTimestamp
    updatedAt: AWSTimestamp
  }
  `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const result = transformer.transform(validSchema);
    expect(result).toBeDefined();
    expect(result.schema).toBeDefined();
    expect(result.schema).toMatchSnapshot();
    expect(result.resolvers['Mutation.createPost.req.vtl']).toMatchSnapshot();
    expect(result.resolvers['Mutation.updatePost.req.vtl']).toMatchSnapshot();
});
test('Test create and update mutation input should have timestamps as nullable fields when the type makes it non-nullable', () => {
    const validSchema = `
  type Post @model {
    id: ID!
    str: String
    createdAt: AWSDateTime!
    updatedAt: AWSDateTime!
  }
  `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const result = transformer.transform(validSchema);
    expect(result).toBeDefined();
    expect(result.schema).toBeDefined();
    expect(result.schema).toMatchSnapshot();
    expect(result.resolvers['Mutation.createPost.req.vtl']).toMatchSnapshot();
    expect(result.resolvers['Mutation.updatePost.req.vtl']).toMatchSnapshot();
});
test('Test not to include createdAt and updatedAt field when timestamps is set to null', () => {
    const validSchema = `
  type Post @model(timestamps: null) {
    id: ID!
    str: String
  }
  `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
    });
    const result = transformer.transform(validSchema);
    expect(result).toBeDefined();
    expect(result.schema).toBeDefined();
    expect(result.schema).toMatchSnapshot();
    expect(result.resolvers['Mutation.createPost.req.vtl']).toMatchSnapshot();
    expect(result.resolvers['Mutation.updatePost.req.vtl']).toMatchSnapshot();
});
test(`V${graphql_transformer_core_1.TRANSFORM_BASE_VERSION} transformer snapshot test`, () => {
    const schema = transformerVersionSnapshot(graphql_transformer_core_1.TRANSFORM_BASE_VERSION);
    expect(schema).toMatchSnapshot();
});
test(`V5 transformer snapshot test`, () => {
    const schema = transformerVersionSnapshot(5);
    expect(schema).toMatchSnapshot();
});
test(`Current version transformer snapshot test`, () => {
    const schema = transformerVersionSnapshot(graphql_transformer_core_1.TRANSFORM_CURRENT_VERSION);
    expect(schema).toMatchSnapshot();
});
function transformerVersionSnapshot(version) {
    const validSchema = `
        type Post @model
        {
          id: ID!
          content: String
        }
    `;
    const transformer = new graphql_transformer_core_1.GraphQLTransform({
        transformers: [new DynamoDBModelTransformer_1.DynamoDBModelTransformer()],
        transformConfig: {
            Version: version,
        },
    });
    const out = transformer.transform(validSchema);
    expect(out).toBeDefined();
    return out.schema;
}
function expectFields(type, fields) {
    for (const fieldName of fields) {
        const foundField = type.fields.find((f) => f.name.value === fieldName);
        expect(foundField).toBeDefined();
    }
}
function expectFieldsOnInputType(type, fields) {
    for (const fieldName of fields) {
        const foundField = type.fields.find((f) => f.name.value === fieldName);
        expect(foundField).toBeDefined();
    }
}
function getFieldOnInputType(type, field) {
    return type.fields.find((f) => f.name.value === field);
}
function getFieldOnObjectType(type, field) {
    return type.fields.find((f) => f.name.value === field);
}
function doNotExpectFields(type, fields) {
    for (const fieldName of fields) {
        expect(type.fields.find((f) => f.name.value === fieldName)).toBeUndefined();
    }
}
function getObjectType(doc, type) {
    return doc.definitions.find((def) => def.kind === graphql_1.Kind.OBJECT_TYPE_DEFINITION && def.name.value === type);
}
function getInputType(doc, type) {
    return doc.definitions.find((def) => def.kind === graphql_1.Kind.INPUT_OBJECT_TYPE_DEFINITION && def.name.value === type);
}
function verifyInputCount(doc, type, count) {
    return doc.definitions.filter(def => def.kind === graphql_1.Kind.INPUT_OBJECT_TYPE_DEFINITION && def.name.value === type).length == count;
}
function verifyMatchingTypes(t1, t2) {
    if (t1.kind !== t2.kind) {
        return false;
    }
    if (t1.kind !== graphql_1.Kind.NAMED_TYPE && t2.kind !== graphql_1.Kind.NAMED_TYPE) {
        verifyMatchingTypes(t1.type, t2.type);
    }
    else {
        return false;
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3lhdGhpcmFqL0RvY3VtZW50cy93b3JrL2FtcGxpZnktY2xpL3BhY2thZ2VzL2dyYXBocWwtZHluYW1vZGItdHJhbnNmb3JtZXIvc3JjL19fdGVzdHNfXy9EeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIudGVzdC50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3lhdGhpcmFqL0RvY3VtZW50cy93b3JrL2FtcGxpZnktY2xpL3BhY2thZ2VzL2dyYXBocWwtZHluYW1vZGItdHJhbnNmb3JtZXIvc3JjL19fdGVzdHNfXy9EeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHFDQVlpQjtBQUNqQix1RUFBK0c7QUFDL0csMEVBQXVFO0FBRXZFLElBQUksQ0FBQyxxREFBcUQsRUFBRSxHQUFHLEVBQUU7SUFDL0QsTUFBTSxXQUFXLEdBQUc7Ozs7Ozs7S0FPakIsQ0FBQztJQUNKLE1BQU0sV0FBVyxHQUFHLElBQUksMkNBQWdCLENBQUM7UUFDdkMsWUFBWSxFQUFFLENBQUMsSUFBSSxtREFBd0IsRUFBRSxDQUFDO0tBQy9DLENBQUMsQ0FBQztJQUNILE1BQU0sR0FBRyxHQUFHLFdBQVcsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDL0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQzVCLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBSSxDQUFDLG9EQUFvRCxFQUFFLEdBQUcsRUFBRTtJQUM5RCxNQUFNLFdBQVcsR0FBRzs7Ozs7O0tBTWpCLENBQUM7SUFDSixNQUFNLFdBQVcsR0FBRyxJQUFJLDJDQUFnQixDQUFDO1FBQ3ZDLFlBQVksRUFBRSxDQUFDLElBQUksbURBQXdCLEVBQUUsQ0FBQztLQUMvQyxDQUFDLENBQUM7SUFDSCxNQUFNLEdBQUcsR0FBRyxXQUFXLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sQ0FBQyxHQUFHLENBQUMs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LENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxjQUFJLENBQUMsNEJBQTRCLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssSUFBSSxDQUFDLENBQUMsTUFBTSxJQUFJLEtBQUssQ0FBQztBQUNsSSxDQUFDO0FBRUQsU0FBUyxtQkFBbUIsQ0FBQyxFQUFZLEVBQUUsRUFBWTtJQUNyRCxJQUFJLEVBQUUsQ0FBQyxJQUFJLEtBQUssRUFBRSxDQUFDLElBQUksRUFBRTtRQUN2QixPQUFPLEtBQUssQ0FBQztLQUNkO0lBRUQsSUFBSSxFQUFFLENBQUMsSUFBSSxLQUFLLGNBQUksQ0FBQyxVQUFVLElBQUksRUFBRSxDQUFDLElBQUksS0FBSyxjQUFJLENBQUMsVUFBVSxFQUFFO1FBQzlELG1CQUFtQixDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3ZDO1NBQU07UUFDTCxPQUFPLEtBQUssQ0FBQztLQUNkO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIE9iamVjdFR5cGVEZWZpbml0aW9uTm9kZSxcbiAgcGFyc2UsXG4gIEZpZWxkRGVmaW5pdGlvbk5vZGUsXG4gIERvY3VtZW50Tm9kZSxcbiAgRGVmaW5pdGlvbk5vZGUsXG4gIEtpbmQsXG4gIElucHV0T2JqZWN0VHlwZURlZmluaXRpb25Ob2RlLFxuICBMaXN0VmFsdWVOb2RlLFxuICBJbnB1dFZhbHVlRGVmaW5pdGlvbk5vZGUsXG4gIFR5cGVOb2RlLFxuICBOYW1lZFR5cGVOb2RlLFxufSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IEdyYXBoUUxUcmFuc2Zvcm0sIFRSQU5TRk9STV9CQVNFX1ZFUlNJT04sIFRSQU5TRk9STV9DVVJSRU5UX1ZFUlNJT04gfSBmcm9tICdncmFwaHFsLXRyYW5zZm9ybWVyLWNvcmUnO1xuaW1wb3J0IHsgRHluYW1vREJNb2RlbFRyYW5zZm9ybWVyIH0gZnJvbSAnLi4vRHluYW1vREJNb2RlbFRyYW5zZm9ybWVyJztcblxudGVzdCgnVGVzdCBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIgdmFsaWRhdGlvbiBoYXBweSBjYXNlJywgKCkgPT4ge1xuICBjb25zdCB2YWxpZFNjaGVtYSA9IGBcbiAgICB0eXBlIFBvc3QgQG1vZGVsIHtcbiAgICAgICAgaWQ6IElEIVxuICAgICAgICB0aXRsZTogU3RyaW5nIVxuICAgICAgICBjcmVhdGVkQXQ6IFN0cmluZ1xuICAgICAgICB1cGRhdGVkQXQ6IFN0cmluZ1xuICAgIH1cbiAgICBgO1xuICBjb25zdCB0cmFuc2Zvcm1lciA9IG5ldyBHcmFwaFFMVHJhbnNmb3JtKHtcbiAgICB0cmFuc2Zvcm1lcnM6IFtuZXcgRHluYW1vREJNb2RlbFRyYW5zZm9ybWVyKCldLFxuICB9KTtcbiAgY29uc3Qgb3V0ID0gdHJhbnNmb3JtZXIudHJhbnNmb3JtKHZhbGlkU2NoZW1hKTtcbiAgZXhwZWN0KG91dCkudG9CZURlZmluZWQoKTtcbn0pO1xuXG50ZXN0KCdUZXN0IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lciB3aXRoIHF1ZXJ5IG92ZXJyaWRlcycsICgpID0+IHtcbiAgY29uc3QgdmFsaWRTY2hlbWEgPSBgdHlwZSBQb3N0IEBtb2RlbChxdWVyaWVzOiB7IGdldDogXCJjdXN0b21HZXRQb3N0XCIsIGxpc3Q6IFwiY3VzdG9tTGlzdFBvc3RcIiB9KSB7XG4gICAgICAgIGlkOiBJRCFcbiAgICAgICAgdGl0bGU6IFN0cmluZyFcbiAgICAgICAgY3JlYXRlZEF0OiBTdHJpbmdcbiAgICAgICAgdXBkYXRlZEF0OiBTdHJpbmdcbiAgICB9XG4gICAgYDtcbiAgY29uc3QgdHJhbnNmb3JtZXIgPSBuZXcgR3JhcGhRTFRyYW5zZm9ybSh7XG4gICAgdHJhbnNmb3JtZXJzOiBbbmV3IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lcigpXSxcbiAgfSk7XG4gIGNvbnN0IG91dCA9IHRyYW5zZm9ybWVyLnRyYW5zZm9ybSh2YWxpZFNjaGVtYSk7XG4gIGV4cGVjdChvdXQpLnRvQmVEZWZpbmVkKCk7XG4gIGNvbnN0IGRlZmluaXRpb24gPSBvdXQuc2NoZW1hO1xuICBleHBlY3QoZGVmaW5pdGlvbikudG9CZURlZmluZWQoKTtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2UoZGVmaW5pdGlvbik7XG4gIGNvbnN0IGNyZWF0ZVBvc3RJbnB1dCA9IGdldElucHV0VHlwZShwYXJzZWQsICdDcmVhdGVQb3N0SW5wdXQnKTtcbiAgZXhwZWN0RmllbGRzT25JbnB1dFR5cGUoY3JlYXRlUG9zdElucHV0LCBbJ2lkJywgJ3RpdGxlJywgJ2NyZWF0ZWRBdCcsICd1cGRhdGVkQXQnXSk7XG4gIC8vIFRoaXMgaWQgc2hvdWxkIGFsd2F5cyBiZSBvcHRpb25hbC5cbiAgLy8gYWthIGEgbmFtZWQgdHlwZSBub2RlIGFrYSBuYW1lLnZhbHVlIHdvdWxkIG5vdCBiZSBzZXQgaWYgaXQgd2VyZSBhIG5vbiBudWxsIG5vZGVcbiAgY29uc3QgaWRGaWVsZCA9IGNyZWF0ZVBvc3RJbnB1dC5maWVsZHMuZmluZChmID0+IGYubmFtZS52YWx1ZSA9PT0gJ2lkJyk7XG4gIGV4cGVjdCgoaWRGaWVsZC50eXBlIGFzIE5hbWVkVHlwZU5vZGUpLm5hbWUudmFsdWUpLnRvRXF1YWwoJ0lEJyk7XG4gIGNvbnN0IHF1ZXJ5VHlwZSA9IGdldE9iamVjdFR5cGUocGFyc2VkLCAnUXVlcnknKTtcbiAgZXhwZWN0KHF1ZXJ5VHlwZSkudG9CZURlZmluZWQoKTtcbiAgZXhwZWN0RmllbGRzKHF1ZXJ5VHlwZSwgWydjdXN0b21HZXRQb3N0J10pO1xuICBleHBlY3RGaWVsZHMocXVlcnlUeXBlLCBbJ2N1c3RvbUxpc3RQb3N0J10pO1xuICBjb25zdCBzdWJzY3JpcHRpb25UeXBlID0gZ2V0T2JqZWN0VHlwZShwYXJzZWQsICdTdWJzY3JpcHRpb24nKTtcbiAgZXhwZWN0KHN1YnNjcmlwdGlvblR5cGUpLnRvQmVEZWZpbmVkKCk7XG4gIGV4cGVjdEZpZWxkcyhzdWJzY3JpcHRpb25UeXBlLCBbJ29uQ3JlYXRlUG9zdCcsICdvblVwZGF0ZVBvc3QnLCAnb25EZWxldGVQb3N0J10pO1xuICBjb25zdCBzdWJGaWVsZCA9IHN1YnNjcmlwdGlvblR5cGUuZmllbGRzLmZpbmQoZiA9PiBmLm5hbWUudmFsdWUgPT09ICdvbkNyZWF0ZVBvc3QnKTtcbiAgZXhwZWN0KHN1YkZpZWxkLmRpcmVjdGl2ZXMubGVuZ3RoKS50b0VxdWFsKDEpO1xuICBleHBlY3Qoc3ViRmllbGQuZGlyZWN0aXZlc1swXS5uYW1lLnZhbHVlKS50b0VxdWFsKCdhd3Nfc3Vic2NyaWJlJyk7XG59KTtcblxudGVzdCgnVGVzdCBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIgd2l0aCBtdXRhdGlvbiBvdmVycmlkZXMnLCAoKSA9PiB7XG4gIGNvbnN0IHZhbGlkU2NoZW1hID0gYHR5cGUgUG9zdCBAbW9kZWwobXV0YXRpb25zOiB7IGNyZWF0ZTogXCJjdXN0b21DcmVhdGVQb3N0XCIsIHVwZGF0ZTogXCJjdXN0b21VcGRhdGVQb3N0XCIsIGRlbGV0ZTogXCJjdXN0b21EZWxldGVQb3N0XCIgfSkge1xuICAgICAgICBpZDogSUQhXG4gICAgICAgIHRpdGxlOiBTdHJpbmchXG4gICAgICAgIGNyZWF0ZWRBdDogU3RyaW5nXG4gICAgICAgIHVwZGF0ZWRBdDogU3RyaW5nXG4gICAgfVxuICAgIGA7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gbmV3IEdyYXBoUUxUcmFuc2Zvcm0oe1xuICAgIHRyYW5zZm9ybWVyczogW25ldyBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIoKV0sXG4gIH0pO1xuICBjb25zdCBvdXQgPSB0cmFuc2Zvcm1lci50cmFuc2Zvcm0odmFsaWRTY2hlbWEpO1xuICBleHBlY3Qob3V0KS50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBkZWZpbml0aW9uID0gb3V0LnNjaGVtYTtcbiAgZXhwZWN0KGRlZmluaXRpb24pLnRvQmVEZWZpbmVkKCk7XG4gIGNvbnN0IHBhcnNlZCA9IHBhcnNlKGRlZmluaXRpb24pO1xuICBjb25zdCBtdXRhdGlvblR5cGUgPSBnZXRPYmplY3RUeXBlKHBhcnNlZCwgJ011dGF0aW9uJyk7XG4gIGV4cGVjdChtdXRhdGlvblR5cGUpLnRvQmVEZWZpbmVkKCk7XG4gIGV4cGVjdEZpZWxkcyhtdXRhdGlvblR5cGUsIFsnY3VzdG9tQ3JlYXRlUG9zdCcsICdjdXN0b21VcGRhdGVQb3N0JywgJ2N1c3RvbURlbGV0ZVBvc3QnXSk7XG59KTtcblxudGVzdCgnVGVzdCBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIgd2l0aCBvbmx5IGNyZWF0ZSBtdXRhdGlvbnMnLCAoKSA9PiB7XG4gIGNvbnN0IHZhbGlkU2NoZW1hID0gYHR5cGUgUG9zdCBAbW9kZWwobXV0YXRpb25zOiB7IGNyZWF0ZTogXCJjdXN0b21DcmVhdGVQb3N0XCIgfSkge1xuICAgICAgICBpZDogSUQhXG4gICAgICAgIHRpdGxlOiBTdHJpbmchXG4gICAgICAgIGNyZWF0ZWRBdDogU3RyaW5nXG4gICAgICAgIHVwZGF0ZWRBdDogU3RyaW5nXG4gICAgfVxuICAgIGA7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gbmV3IEdyYXBoUUxUcmFuc2Zvcm0oe1xuICAgIHRyYW5zZm9ybWVyczogW25ldyBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIoKV0sXG4gIH0pO1xuICBjb25zdCBvdXQgPSB0cmFuc2Zvcm1lci50cmFuc2Zvcm0odmFsaWRTY2hlbWEpO1xuICBleHBlY3Qob3V0KS50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBkZWZpbml0aW9uID0gb3V0LnNjaGVtYTtcbiAgZXhwZWN0KGRlZmluaXRpb24pLnRvQmVEZWZpbmVkKCk7XG4gIGNvbnN0IHBhcnNlZCA9IHBhcnNlKGRlZmluaXRpb24pO1xuICBjb25zdCBtdXRhdGlvblR5cGUgPSBnZXRPYmplY3RUeXBlKHBhcnNlZCwgJ011dGF0aW9uJyk7XG4gIGV4cGVjdChtdXRhdGlvblR5cGUpLnRvQmVEZWZpbmVkKCk7XG4gIGV4cGVjdEZpZWxkcyhtdXRhdGlvblR5cGUsIFsnY3VzdG9tQ3JlYXRlUG9zdCddKTtcbiAgZG9Ob3RFeHBlY3RGaWVsZHMobXV0YXRpb25UeXBlLCBbJ3VwZGF0ZVBvc3QnXSk7XG59KTtcblxudGVzdCgnVGVzdCBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIgd2l0aCBtdWx0aXBsZSBtb2RlbCBkaXJlY3RpdmVzJywgKCkgPT4ge1xuICBjb25zdCB2YWxpZFNjaGVtYSA9IGBcbiAgICB0eXBlIFBvc3QgQG1vZGVsIHtcbiAgICAgICAgaWQ6IElEIVxuICAgICAgICB0aXRsZTogU3RyaW5nIVxuICAgICAgICBjcmVhdGVkQXQ6IFN0cmluZ1xuICAgICAgICB1cGRhdGVkQXQ6IFN0cmluZ1xuICAgIH1cblxuICAgIHR5cGUgVXNlciBAbW9kZWwge1xuICAgICAgICBpZDogSUQhXG4gICAgICAgIG5hbWU6IFN0cmluZyFcbiAgICB9XG4gICAgYDtcbiAgY29uc3QgdHJhbnNmb3JtZXIgPSBuZXcgR3JhcGhRTFRyYW5zZm9ybSh7XG4gICAgdHJhbnNmb3JtZXJzOiBbbmV3IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lcigpXSxcbiAgfSk7XG4gIGNvbnN0IG91dCA9IHRyYW5zZm9ybWVyLnRyYW5zZm9ybSh2YWxpZFNjaGVtYSk7XG4gIGV4cGVjdChvdXQpLnRvQmVEZWZpbmVkKCk7XG5cbiAgY29uc3QgZGVmaW5pdGlvbiA9IG91dC5zY2hlbWE7XG4gIGV4cGVjdChkZWZpbml0aW9uKS50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZShkZWZpbml0aW9uKTtcbiAgY29uc3QgcXVlcnlUeXBlID0gZ2V0T2JqZWN0VHlwZShwYXJzZWQsICdRdWVyeScpO1xuICBleHBlY3QocXVlcnlUeXBlKS50b0JlRGVmaW5lZCgpO1xuICBleHBlY3RGaWVsZHMocXVlcnlUeXBlLCBbJ2xpc3RQb3N0cyddKTtcbiAgZXhwZWN0RmllbGRzKHF1ZXJ5VHlwZSwgWydsaXN0VXNlcnMnXSk7XG5cbiAgY29uc3Qgc3RyaW5nSW5wdXRUeXBlID0gZ2V0SW5wdXRUeXBlKHBhcnNlZCwgJ01vZGVsU3RyaW5nRmlsdGVySW5wdXQnKTtcbiAgZXhwZWN0KHN0cmluZ0lucHV0VHlwZSkudG9CZURlZmluZWQoKTtcbiAgY29uc3QgYm9vbGVhbklucHV0VHlwZSA9IGdldElucHV0VHlwZShwYXJzZWQsICdNb2RlbEJvb2xlYW5GaWx0ZXJJbnB1dCcpO1xuICBleHBlY3QoYm9vbGVhbklucHV0VHlwZSkudG9CZURlZmluZWQoKTtcbiAgY29uc3QgaW50SW5wdXRUeXBlID0gZ2V0SW5wdXRUeXBlKHBhcnNlZCwgJ01vZGVsSW50RmlsdGVySW5wdXQnKTtcbiAgZXhwZWN0KGludElucHV0VHlwZSkudG9CZURlZmluZWQoKTtcbiAgY29uc3QgZmxvYXRJbnB1dFR5cGUgPSBnZXRJbnB1dFR5cGUocGFyc2VkLCAnTW9kZWxGbG9hdEZpbHRlcklucHV0Jyk7XG4gIGV4cGVjdChmbG9hdElucHV0VHlwZSkudG9CZURlZmluZWQoKTtcbiAgY29uc3QgaWRJbnB1dFR5cGUgPSBnZXRJbnB1dFR5cGUocGFyc2VkLCAnTW9kZWxJREZpbHRlcklucHV0Jyk7XG4gIGV4cGVjdChpZElucHV0VHlwZSkudG9CZURlZmluZWQoKTtcbiAgY29uc3QgcG9zdElucHV0VHlwZSA9IGdldElucHV0VHlwZShwYXJzZWQsICdNb2RlbFBvc3RGaWx0ZXJJbnB1dCcpO1xuICBleHBlY3QocG9zdElucHV0VHlwZSkudG9CZURlZmluZWQoKTtcbiAgY29uc3QgdXNlcklucHV0VHlwZSA9IGdldElucHV0VHlwZShwYXJzZWQsICdNb2RlbFVzZXJGaWx0ZXJJbnB1dCcpO1xuICBleHBlY3QodXNlcklucHV0VHlwZSkudG9CZURlZmluZWQoKTtcblxuICBleHBlY3QodmVyaWZ5SW5wdXRDb3VudChwYXJzZWQsICdNb2RlbFN0cmluZ0ZpbHRlcklucHV0JywgMSkpLnRvQmVUcnV0aHkoKTtcbiAgZXhwZWN0KHZlcmlmeUlucHV0Q291bnQocGFyc2VkLCAnTW9kZWxCb29sZWFuRmlsdGVySW5wdXQnLCAxKSkudG9CZVRydXRoeSgpO1xuICBleHBlY3QodmVyaWZ5SW5wdXRDb3VudChwYXJzZWQsICdNb2RlbEludEZpbHRlcklucHV0JywgMSkpLnRvQmVUcnV0aHkoKTtcbiAgZXhwZWN0KHZlcmlmeUlucHV0Q291bnQocGFyc2VkLCAnTW9kZWxGbG9hdEZpbHRlcklucHV0JywgMSkpLnRvQmVUcnV0aHkoKTtcbiAgZXhwZWN0KHZlcmlmeUlucHV0Q291bnQocGFyc2VkLCAnTW9kZWxJREZpbHRlcklucHV0JywgMSkpLnRvQmVUcnV0aHkoKTtcbiAgZXhwZWN0KHZlcmlmeUlucHV0Q291bnQocGFyc2VkLCAnTW9kZWxQb3N0RmlsdGVySW5wdXQnLCAxKSkudG9CZVRydXRoeSgpO1xuICBleHBlY3QodmVyaWZ5SW5wdXRDb3VudChwYXJzZWQsICdNb2RlbFVzZXJGaWx0ZXJJbnB1dCcsIDEpKS50b0JlVHJ1dGh5KCk7XG59KTtcblxudGVzdCgnVGVzdCBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIgd2l0aCBmaWx0ZXInLCAoKSA9PiB7XG4gIGNvbnN0IHZhbGlkU2NoZW1hID0gYFxuICAgIHR5cGUgUG9zdCBAbW9kZWwge1xuICAgICAgICBpZDogSUQhXG4gICAgICAgIHRpdGxlOiBTdHJpbmchXG4gICAgICAgIGNyZWF0ZWRBdDogU3RyaW5nXG4gICAgICAgIHVwZGF0ZWRBdDogU3RyaW5nXG4gICAgfWA7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gbmV3IEdyYXBoUUxUcmFuc2Zvcm0oe1xuICAgIHRyYW5zZm9ybWVyczogW25ldyBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIoKV0sXG4gIH0pO1xuICBjb25zdCBvdXQgPSB0cmFuc2Zvcm1lci50cmFuc2Zvcm0odmFsaWRTY2hlbWEpO1xuICBleHBlY3Qob3V0KS50b0JlRGVmaW5lZCgpO1xuXG4gIGNvbnN0IGRlZmluaXRpb24gPSBvdXQuc2NoZW1hO1xuICBleHBlY3QoZGVmaW5pdGlvbikudG9CZURlZmluZWQoKTtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2UoZGVmaW5pdGlvbik7XG4gIGNvbnN0IHF1ZXJ5VHlwZSA9IGdldE9iamVjdFR5cGUocGFyc2VkLCAnUXVlcnknKTtcbiAgZXhwZWN0KHF1ZXJ5VHlwZSkudG9CZURlZmluZWQoKTtcbiAgZXhwZWN0RmllbGRzKHF1ZXJ5VHlwZSwgWydsaXN0UG9zdHMnXSk7XG5cbiAgY29uc3QgY29ubmVjdGlvblR5cGUgPSBnZXRPYmplY3RUeXBlKHBhcnNlZCwgJ01vZGVsUG9zdENvbm5lY3Rpb24nKTtcbiAgZXhwZWN0KGNvbm5lY3Rpb25UeXBlKS50b0JlRGVmaW5lZCgpO1xuXG4gIGV4cGVjdCh2ZXJpZnlJbnB1dENvdW50KHBhcnNlZCwgJ01vZGVsU3RyaW5nRmlsdGVySW5wdXQnLCAxKSkudG9CZVRydXRoeSgpO1xuICBleHBlY3QodmVyaWZ5SW5wdXRDb3VudChwYXJzZWQsICdNb2RlbEJvb2xlYW5GaWx0ZXJJbnB1dCcsIDEpKS50b0JlVHJ1dGh5KCk7XG4gIGV4cGVjdCh2ZXJpZnlJbnB1dENvdW50KHBhcnNlZCwgJ01vZGVsSW50RmlsdGVySW5wdXQnLCAxKSkudG9CZVRydXRoeSgpO1xuICBleHBlY3QodmVyaWZ5SW5wdXRDb3VudChwYXJzZWQsICdNb2RlbEZsb2F0RmlsdGVySW5wdXQnLCAxKSkudG9CZVRydXRoeSgpO1xuICBleHBlY3QodmVyaWZ5SW5wdXRDb3VudChwYXJzZWQsICdNb2RlbElERmlsdGVySW5wdXQnLCAxKSkudG9CZVRydXRoeSgpO1xuICBleHBlY3QodmVyaWZ5SW5wdXRDb3VudChwYXJzZWQsICdNb2RlbFBvc3RGaWx0ZXJJbnB1dCcsIDEpKS50b0JlVHJ1dGh5KCk7XG59KTtcblxudGVzdCgnVGVzdCBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIgd2l0aCBtdXRhdGlvbnMgc2V0IHRvIG51bGwnLCAoKSA9PiB7XG4gIGNvbnN0IHZhbGlkU2NoZW1hID0gYHR5cGUgUG9zdCBAbW9kZWwobXV0YXRpb25zOiBudWxsKSB7XG4gICAgICAgICAgaWQ6IElEIVxuICAgICAgICAgIHRpdGxlOiBTdHJpbmchXG4gICAgICAgICAgY3JlYXRlZEF0OiBTdHJpbmdcbiAgICAgICAgICB1cGRhdGVkQXQ6IFN0cmluZ1xuICAgICAgfVxuICAgICAgYDtcbiAgY29uc3QgdHJhbnNmb3JtZXIgPSBuZXcgR3JhcGhRTFRyYW5zZm9ybSh7XG4gICAgdHJhbnNmb3JtZXJzOiBbbmV3IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lcigpXSxcbiAgfSk7XG4gIGNvbnN0IG91dCA9IHRyYW5zZm9ybWVyLnRyYW5zZm9ybSh2YWxpZFNjaGVtYSk7XG4gIGV4cGVjdChvdXQpLnRvQmVEZWZpbmVkKCk7XG4gIGNvbnN0IGRlZmluaXRpb24gPSBvdXQuc2NoZW1hO1xuICBleHBlY3QoZGVmaW5pdGlvbikudG9CZURlZmluZWQoKTtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2UoZGVmaW5pdGlvbik7XG4gIGNvbnN0IG11dGF0aW9uVHlwZSA9IGdldE9iamVjdFR5cGUocGFyc2VkLCAnTXV0YXRpb24nKTtcbiAgZXhwZWN0KG11dGF0aW9uVHlwZSkubm90LnRvQmVEZWZpbmVkKCk7XG59KTtcbnRlc3QoJ1Rlc3QgRHluYW1vREJNb2RlbFRyYW5zZm9ybWVyIHdpdGggcXVlcmllcyBzZXQgdG8gbnVsbCcsICgpID0+IHtcbiAgY29uc3QgdmFsaWRTY2hlbWEgPSBgdHlwZSBQb3N0IEBtb2RlbChxdWVyaWVzOiBudWxsKSB7XG4gICAgICAgICAgaWQ6IElEIVxuICAgICAgICAgIHRpdGxlOiBTdHJpbmchXG4gICAgICAgICAgY3JlYXRlZEF0OiBTdHJpbmdcbiAgICAgICAgICB1cGRhdGVkQXQ6IFN0cmluZ1xuICAgICAgfVxuICAgICAgYDtcbiAgY29uc3QgdHJhbnNmb3JtZXIgPSBuZXcgR3JhcGhRTFRyYW5zZm9ybSh7XG4gICAgdHJhbnNmb3JtZXJzOiBbbmV3IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lcigpXSxcbiAgfSk7XG4gIGNvbnN0IG91dCA9IHRyYW5zZm9ybWVyLnRyYW5zZm9ybSh2YWxpZFNjaGVtYSk7XG4gIGV4cGVjdChvdXQpLnRvQmVEZWZpbmVkKCk7XG4gIGNvbnN0IGRlZmluaXRpb24gPSBvdXQuc2NoZW1hO1xuICBleHBlY3QoZGVmaW5pdGlvbikudG9CZURlZmluZWQoKTtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2UoZGVmaW5pdGlvbik7XG4gIGNvbnN0IG11dGF0aW9uVHlwZSA9IGdldE9iamVjdFR5cGUocGFyc2VkLCAnTXV0YXRpb24nKTtcbiAgZXhwZWN0KG11dGF0aW9uVHlwZSkudG9CZURlZmluZWQoKTtcbiAgY29uc3QgcXVlcnlUeXBlID0gZ2V0T2JqZWN0VHlwZShwYXJzZWQsICdRdWVyeScpO1xuICBleHBlY3QocXVlcnlUeXBlKS5ub3QudG9CZURlZmluZWQoKTtcbn0pO1xudGVzdCgnVGVzdCBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIgd2l0aCBzdWJzY3JpcHRpb25zIHNldCB0byBudWxsJywgKCkgPT4ge1xuICBjb25zdCB2YWxpZFNjaGVtYSA9IGB0eXBlIFBvc3QgQG1vZGVsKHN1YnNjcmlwdGlvbnM6IG51bGwpIHtcbiAgICAgICAgICBpZDogSUQhXG4gICAgICAgICAgdGl0bGU6IFN0cmluZyFcbiAgICAgICAgICBjcmVhdGVkQXQ6IFN0cmluZ1xuICAgICAgICAgIHVwZGF0ZWRBdDogU3RyaW5nXG4gICAgICB9XG4gICAgICBgO1xuICBjb25zdCB0cmFuc2Zvcm1lciA9IG5ldyBHcmFwaFFMVHJhbnNmb3JtKHtcbiAgICB0cmFuc2Zvcm1lcnM6IFtuZXcgRHluYW1vREJNb2RlbFRyYW5zZm9ybWVyKCldLFxuICB9KTtcbiAgY29uc3Qgb3V0ID0gdHJhbnNmb3JtZXIudHJhbnNmb3JtKHZhbGlkU2NoZW1hKTtcbiAgZXhwZWN0KG91dCkudG9CZURlZmluZWQoKTtcbiAgY29uc3QgZGVmaW5pdGlvbiA9IG91dC5zY2hlbWE7XG4gIGV4cGVjdChkZWZpbml0aW9uKS50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZShkZWZpbml0aW9uKTtcbiAgY29uc3QgbXV0YXRpb25UeXBlID0gZ2V0T2JqZWN0VHlwZShwYXJzZWQsICdNdXRhdGlvbicpO1xuICBleHBlY3QobXV0YXRpb25UeXBlKS50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBxdWVyeVR5cGUgPSBnZXRPYmplY3RUeXBlKHBhcnNlZCwgJ1F1ZXJ5Jyk7XG4gIGV4cGVjdChxdWVyeVR5cGUpLnRvQmVEZWZpbmVkKCk7XG4gIGNvbnN0IHN1YnNjcmlwdGlvblR5cGUgPSBnZXRPYmplY3RUeXBlKHBhcnNlZCwgJ1N1YnNjcmlwdGlvbicpO1xuICBleHBlY3Qoc3Vic2NyaXB0aW9uVHlwZSkubm90LnRvQmVEZWZpbmVkKCk7XG59KTtcbnRlc3QoJ1Rlc3QgRHluYW1vREJNb2RlbFRyYW5zZm9ybWVyIHdpdGggcXVlcmllcyBhbmQgbXV0YXRpb25zIHNldCB0byBudWxsJywgKCkgPT4ge1xuICBjb25zdCB2YWxpZFNjaGVtYSA9IGB0eXBlIFBvc3QgQG1vZGVsKHF1ZXJpZXM6IG51bGwsIG11dGF0aW9uczogbnVsbCwgc3Vic2NyaXB0aW9uczogbnVsbCkge1xuICAgICAgICAgIGlkOiBJRCFcbiAgICAgICAgICB0aXRsZTogU3RyaW5nIVxuICAgICAgICAgIGNyZWF0ZWRBdDogU3RyaW5nXG4gICAgICAgICAgdXBkYXRlZEF0OiBTdHJpbmdcbiAgICAgIH1cbiAgICAgIGA7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gbmV3IEdyYXBoUUxUcmFuc2Zvcm0oe1xuICAgIHRyYW5zZm9ybWVyczogW25ldyBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIoKV0sXG4gIH0pO1xuICBjb25zdCBvdXQgPSB0cmFuc2Zvcm1lci50cmFuc2Zvcm0odmFsaWRTY2hlbWEpO1xuICBleHBlY3Qob3V0KS50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBkZWZpbml0aW9uID0gb3V0LnNjaGVtYTtcbiAgZXhwZWN0KGRlZmluaXRpb24pLnRvQmVEZWZpbmVkKCk7XG4gIGNvbnN0IHBhcnNlZCA9IHBhcnNlKGRlZmluaXRpb24pO1xuICBjb25zdCBtdXRhdGlvblR5cGUgPSBnZXRPYmplY3RUeXBlKHBhcnNlZCwgJ011dGF0aW9uJyk7XG4gIGV4cGVjdChtdXRhdGlvblR5cGUpLm5vdC50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBxdWVyeVR5cGUgPSBnZXRPYmplY3RUeXBlKHBhcnNlZCwgJ1F1ZXJ5Jyk7XG4gIGV4cGVjdChxdWVyeVR5cGUpLm5vdC50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBzdWJzY3JpcHRpb25UeXBlID0gZ2V0T2JqZWN0VHlwZShwYXJzZWQsICdTdWJzY3JpcHRpb24nKTtcbiAgZXhwZWN0KHN1YnNjcmlwdGlvblR5cGUpLm5vdC50b0JlRGVmaW5lZCgpO1xufSk7XG50ZXN0KCdUZXN0IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lciB3aXRoIGFkdmFuY2VkIHN1YnNjcmlwdGlvbnMnLCAoKSA9PiB7XG4gIGNvbnN0IHZhbGlkU2NoZW1hID0gYHR5cGUgUG9zdCBAbW9kZWwoc3Vic2NyaXB0aW9uczoge1xuICAgICAgICAgICAgb25DcmVhdGU6IFtcIm9uRmVlZFVwZGF0ZWRcIiwgXCJvbkNyZWF0ZVBvc3RcIl0sXG4gICAgICAgICAgICBvblVwZGF0ZTogW1wib25GZWVkVXBkYXRlZFwiXSxcbiAgICAgICAgICAgIG9uRGVsZXRlOiBbXCJvbkZlZWRVcGRhdGVkXCJdXG4gICAgICAgIH0pIHtcbiAgICAgICAgICBpZDogSUQhXG4gICAgICAgICAgdGl0bGU6IFN0cmluZyFcbiAgICAgICAgICBjcmVhdGVkQXQ6IFN0cmluZ1xuICAgICAgICAgIHVwZGF0ZWRBdDogU3RyaW5nXG4gICAgICB9XG4gICAgICBgO1xuICBjb25zdCB0cmFuc2Zvcm1lciA9IG5ldyBHcmFwaFFMVHJhbnNmb3JtKHtcbiAgICB0cmFuc2Zvcm1lcnM6IFtuZXcgRHluYW1vREJNb2RlbFRyYW5zZm9ybWVyKCldLFxuICB9KTtcbiAgY29uc3Qgb3V0ID0gdHJhbnNmb3JtZXIudHJhbnNmb3JtKHZhbGlkU2NoZW1hKTtcbiAgZXhwZWN0KG91dCkudG9CZURlZmluZWQoKTtcbiAgY29uc3QgZGVmaW5pdGlvbiA9IG91dC5zY2hlbWE7XG4gIGV4cGVjdChkZWZpbml0aW9uKS50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZShkZWZpbml0aW9uKTtcbiAgY29uc3Qgc3Vic2NyaXB0aW9uVHlwZSA9IGdldE9iamVjdFR5cGUocGFyc2VkLCAnU3Vic2NyaXB0aW9uJyk7XG4gIGV4cGVjdChzdWJzY3JpcHRpb25UeXBlKS50b0JlRGVmaW5lZCgpO1xuICBleHBlY3RGaWVsZHMoc3Vic2NyaXB0aW9uVHlwZSwgWydvbkZlZWRVcGRhdGVkJywgJ29uQ3JlYXRlUG9zdCddKTtcbiAgY29uc3Qgc3ViRmllbGQgPSBzdWJzY3JpcHRpb25UeXBlLmZpZWxkcy5maW5kKGYgPT4gZi5uYW1lLnZhbHVlID09PSAnb25GZWVkVXBkYXRlZCcpO1xuICBleHBlY3Qoc3ViRmllbGQuZGlyZWN0aXZlcy5sZW5ndGgpLnRvRXF1YWwoMSk7XG4gIGV4cGVjdChzdWJGaWVsZC5kaXJlY3RpdmVzWzBdLm5hbWUudmFsdWUpLnRvRXF1YWwoJ2F3c19zdWJzY3JpYmUnKTtcbiAgY29uc3QgbXV0YXRpb25zTGlzdCA9IHN1YkZpZWxkLmRpcmVjdGl2ZXNbMF0uYXJndW1lbnRzLmZpbmQoYSA9PiBhLm5hbWUudmFsdWUgPT09ICdtdXRhdGlvbnMnKS52YWx1ZSBhcyBMaXN0VmFsdWVOb2RlO1xuICBjb25zdCBtdXRMaXN0ID0gbXV0YXRpb25zTGlzdC52YWx1ZXMubWFwKCh2OiBhbnkpID0+IHYudmFsdWUpO1xuICBleHBlY3QobXV0TGlzdC5sZW5ndGgpLnRvRXF1YWwoMyk7XG4gIGV4cGVjdChtdXRMaXN0KS50b0NvbnRhaW4oJ2NyZWF0ZVBvc3QnKTtcbiAgZXhwZWN0KG11dExpc3QpLnRvQ29udGFpbigndXBkYXRlUG9zdCcpO1xuICBleHBlY3QobXV0TGlzdCkudG9Db250YWluKCdkZWxldGVQb3N0Jyk7XG59KTtcblxudGVzdCgnVGVzdCBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIgd2l0aCBub24tbW9kZWwgdHlwZXMgYW5kIGVudW1zJywgKCkgPT4ge1xuICBjb25zdCB2YWxpZFNjaGVtYSA9IGBcbiAgICB0eXBlIFBvc3QgQG1vZGVsIHtcbiAgICAgICAgaWQ6IElEIVxuICAgICAgICB0aXRsZTogU3RyaW5nIVxuICAgICAgICBjcmVhdGVkQXQ6IFN0cmluZ1xuICAgICAgICB1cGRhdGVkQXQ6IFN0cmluZ1xuICAgICAgICBtZXRhZGF0YTogW1Bvc3RNZXRhZGF0YSFdIVxuICAgICAgICBhcHBlYXJzSW46IFtFcGlzb2RlXSFcbiAgICB9XG4gICAgdHlwZSBQb3N0TWV0YWRhdGEge1xuICAgICAgICB0YWdzOiBUYWdcbiAgICB9XG4gICAgdHlwZSBUYWcge1xuICAgICAgICBwdWJsaXNoZWQ6IEJvb2xlYW5cbiAgICAgICAgbWV0YWRhdGE6IFBvc3RNZXRhZGF0YVxuICAgIH1cbiAgICBlbnVtIEVwaXNvZGUge1xuICAgICAgICBORVdIT1BFXG4gICAgICAgIEVNUElSRVxuICAgICAgICBKRURJXG4gICAgfVxuICAgIGA7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gbmV3IEdyYXBoUUxUcmFuc2Zvcm0oe1xuICAgIHRyYW5zZm9ybWVyczogW25ldyBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIoKV0sXG4gIH0pO1xuICBjb25zdCBvdXQgPSB0cmFuc2Zvcm1lci50cmFuc2Zvcm0odmFsaWRTY2hlbWEpO1xuICBleHBlY3Qob3V0KS50b0JlRGVmaW5lZCgpO1xuXG4gIGNvbnN0IGRlZmluaXRpb24gPSBvdXQuc2NoZW1hO1xuICBleHBlY3QoZGVmaW5pdGlvbikudG9CZURlZmluZWQoKTtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2UoZGVmaW5pdGlvbik7XG5cbiAgY29uc3QgcG9zdE1ldGFEYXRhSW5wdXRUeXBlID0gZ2V0SW5wdXRUeXBlKHBhcnNlZCwgJ1Bvc3RNZXRhZGF0YUlucHV0Jyk7XG4gIGV4cGVjdChwb3N0TWV0YURhdGFJbnB1dFR5cGUpLnRvQmVEZWZpbmVkKCk7XG4gIGNvbnN0IHRhZ0lucHV0VHlwZSA9IGdldElucHV0VHlwZShwYXJzZWQsICdUYWdJbnB1dCcpO1xuICBleHBlY3QodGFnSW5wdXRUeXBlKS50b0JlRGVmaW5lZCgpO1xuICBleHBlY3RGaWVsZHNPbklucHV0VHlwZSh0YWdJbnB1dFR5cGUsIFsnbWV0YWRhdGEnXSk7XG4gIGNvbnN0IGNyZWF0ZVBvc3RJbnB1dFR5cGUgPSBnZXRJbnB1dFR5cGUocGFyc2VkLCAnQ3JlYXRlUG9zdElucHV0Jyk7XG4gIGV4cGVjdEZpZWxkc09uSW5wdXRUeXBlKGNyZWF0ZVBvc3RJbnB1dFR5cGUsIFsnbWV0YWRhdGEnLCAnYXBwZWFyc0luJ10pO1xuICBjb25zdCB1cGRhdGVQb3N0SW5wdXRUeXBlID0gZ2V0SW5wdXRUeXBlKHBhcnNlZCwgJ1VwZGF0ZVBvc3RJbnB1dCcpO1xuICBleHBlY3RGaWVsZHNPbklucHV0VHlwZSh1cGRhdGVQb3N0SW5wdXRUeXBlLCBbJ21ldGFkYXRhJywgJ2FwcGVhcnNJbiddKTtcblxuICBjb25zdCBwb3N0TW9kZWxPYmplY3QgPSBnZXRPYmplY3RUeXBlKHBhcnNlZCwgJ1Bvc3QnKTtcbiAgY29uc3QgcG9zdE1ldGFEYXRhSW5wdXRGaWVsZCA9IGdldEZpZWxkT25JbnB1dFR5cGUoY3JlYXRlUG9zdElucHV0VHlwZSwgJ21ldGFkYXRhJyk7XG4gIGNvbnN0IHBvc3RNZXRhRGF0YUZpZWxkID0gZ2V0RmllbGRPbk9iamVjdFR5cGUocG9zdE1vZGVsT2JqZWN0LCAnbWV0YWRhdGEnKTtcbiAgLy8gdGhpcyBjaGVja3MgdGhhdCB0aGUgbm9uLW1vZGVsIHR5cGUgd2FzIHByb3Blcmx5IFwidW53cmFwcGVkXCIsIHJlbmFtZWQsIGFuZCBcInJld3JhcHBlZFwiXG4gIC8vIGluIHRoZSBnZW5lcmF0ZWQgQ3JlYXRlUG9zdElucHV0IHR5cGUgLSBpdHMgdHlwZXMgc2hvdWxkIGJlIHRoZSBzYW1lIGFzIGluIHRoZSBQb3N0IEBtb2RlbCB0eXBlXG4gIHZlcmlmeU1hdGNoaW5nVHlwZXMocG9zdE1ldGFEYXRhSW5wdXRGaWVsZC50eXBlLCBwb3N0TWV0YURhdGFGaWVsZC50eXBlKTtcblxuICBleHBlY3QodmVyaWZ5SW5wdXRDb3VudChwYXJzZWQsICdQb3N0TWV0YWRhdGFJbnB1dCcsIDEpKS50b0JlVHJ1dGh5KCk7XG4gIGV4cGVjdCh2ZXJpZnlJbnB1dENvdW50KHBhcnNlZCwgJ1RhZ0lucHV0JywgMSkpLnRvQmVUcnV0aHkoKTtcbn0pO1xuXG50ZXN0KCdUZXN0IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lciB3aXRoIG11dGF0aW9uIGlucHV0IG92ZXJyaWRlcyB3aGVuIG11dGF0aW9ucyBhcmUgZGlzYWJsZWQnLCAoKSA9PiB7XG4gIGNvbnN0IHZhbGlkU2NoZW1hID0gYHR5cGUgUG9zdCBAbW9kZWwobXV0YXRpb25zOiBudWxsKSB7XG4gICAgICAgIGlkOiBJRCFcbiAgICAgICAgdGl0bGU6IFN0cmluZyFcbiAgICAgICAgY3JlYXRlZEF0OiBTdHJpbmdcbiAgICAgICAgdXBkYXRlZEF0OiBTdHJpbmdcbiAgICB9XG4gICAgaW5wdXQgQ3JlYXRlUG9zdElucHV0IHtcbiAgICAgICAgZGlmZmVyZW50OiBTdHJpbmdcbiAgICB9XG4gICAgaW5wdXQgVXBkYXRlUG9zdElucHV0IHtcbiAgICAgICAgZGlmZmVyZW50MjogU3RyaW5nXG4gICAgfVxuICAgIGlucHV0IERlbGV0ZVBvc3RJbnB1dCB7XG4gICAgICAgIGRpZmZlcmVudDM6IFN0cmluZ1xuICAgIH1cbiAgICBgO1xuICBjb25zdCB0cmFuc2Zvcm1lciA9IG5ldyBHcmFwaFFMVHJhbnNmb3JtKHtcbiAgICB0cmFuc2Zvcm1lcnM6IFtuZXcgRHluYW1vREJNb2RlbFRyYW5zZm9ybWVyKCldLFxuICB9KTtcbiAgY29uc3Qgb3V0ID0gdHJhbnNmb3JtZXIudHJhbnNmb3JtKHZhbGlkU2NoZW1hKTtcbiAgZXhwZWN0KG91dCkudG9CZURlZmluZWQoKTtcbiAgY29uc3QgZGVmaW5pdGlvbiA9IG91dC5zY2hlbWE7XG4gIGV4cGVjdChkZWZpbml0aW9uKS50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZShkZWZpbml0aW9uKTtcbiAgY29uc3QgY3JlYXRlUG9zdElucHV0ID0gZ2V0SW5wdXRUeXBlKHBhcnNlZCwgJ0NyZWF0ZVBvc3RJbnB1dCcpO1xuICBleHBlY3RGaWVsZHNPbklucHV0VHlwZShjcmVhdGVQb3N0SW5wdXQsIFsnZGlmZmVyZW50J10pO1xuICBjb25zdCB1cGRhdGVQb3N0SW5wdXQgPSBnZXRJbnB1dFR5cGUocGFyc2VkLCAnVXBkYXRlUG9zdElucHV0Jyk7XG4gIGV4cGVjdEZpZWxkc09uSW5wdXRUeXBlKHVwZGF0ZVBvc3RJbnB1dCwgWydkaWZmZXJlbnQyJ10pO1xuICBjb25zdCBkZWxldGVQb3N0SW5wdXQgPSBnZXRJbnB1dFR5cGUocGFyc2VkLCAnRGVsZXRlUG9zdElucHV0Jyk7XG4gIGV4cGVjdEZpZWxkc09uSW5wdXRUeXBlKGRlbGV0ZVBvc3RJbnB1dCwgWydkaWZmZXJlbnQzJ10pO1xufSk7XG5cbnRlc3QoJ1Rlc3QgRHluYW1vREJNb2RlbFRyYW5zZm9ybWVyIHdpdGggbXV0YXRpb24gaW5wdXQgb3ZlcnJpZGVzIHdoZW4gbXV0YXRpb25zIGFyZSBlbmFibGVkJywgKCkgPT4ge1xuICBjb25zdCB2YWxpZFNjaGVtYSA9IGB0eXBlIFBvc3QgQG1vZGVsIHtcbiAgICAgICAgaWQ6IElEIVxuICAgICAgICB0aXRsZTogU3RyaW5nIVxuICAgICAgICBjcmVhdGVkQXQ6IFN0cmluZ1xuICAgICAgICB1cGRhdGVkQXQ6IFN0cmluZ1xuICAgIH1cbiAgICAjIFVzZXIgZGVmaW5lZCB0eXBlcyBhbHdheXMgdGFrZSBwcmVjZWRlbmNlLlxuICAgIGlucHV0IENyZWF0ZVBvc3RJbnB1dCB7XG4gICAgICAgIGRpZmZlcmVudDogU3RyaW5nXG4gICAgfVxuICAgIGlucHV0IFVwZGF0ZVBvc3RJbnB1dCB7XG4gICAgICAgIGRpZmZlcmVudDI6IFN0cmluZ1xuICAgIH1cbiAgICBpbnB1dCBEZWxldGVQb3N0SW5wdXQge1xuICAgICAgICBkaWZmZXJlbnQzOiBTdHJpbmdcbiAgICB9XG4gICAgYDtcbiAgY29uc3QgdHJhbnNmb3JtZXIgPSBuZXcgR3JhcGhRTFRyYW5zZm9ybSh7XG4gICAgdHJhbnNmb3JtZXJzOiBbbmV3IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lcigpXSxcbiAgfSk7XG4gIGNvbnN0IG91dCA9IHRyYW5zZm9ybWVyLnRyYW5zZm9ybSh2YWxpZFNjaGVtYSk7XG4gIGV4cGVjdChvdXQpLnRvQmVEZWZpbmVkKCk7XG4gIGNvbnN0IGRlZmluaXRpb24gPSBvdXQuc2NoZW1hO1xuICBleHBlY3QoZGVmaW5pdGlvbikudG9CZURlZmluZWQoKTtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2UoZGVmaW5pdGlvbik7XG4gIGNvbnN0IGNyZWF0ZVBvc3RJbnB1dCA9IGdldElucHV0VHlwZShwYXJzZWQsICdDcmVhdGVQb3N0SW5wdXQnKTtcbiAgZXhwZWN0RmllbGRzT25JbnB1dFR5cGUoY3JlYXRlUG9zdElucHV0LCBbJ2RpZmZlcmVudCddKTtcbiAgY29uc3QgdXBkYXRlUG9zdElucHV0ID0gZ2V0SW5wdXRUeXBlKHBhcnNlZCwgJ1VwZGF0ZVBvc3RJbnB1dCcpO1xuICBleHBlY3RGaWVsZHNPbklucHV0VHlwZSh1cGRhdGVQb3N0SW5wdXQsIFsnZGlmZmVyZW50MiddKTtcbiAgY29uc3QgZGVsZXRlUG9zdElucHV0ID0gZ2V0SW5wdXRUeXBlKHBhcnNlZCwgJ0RlbGV0ZVBvc3RJbnB1dCcpO1xuICBleHBlY3RGaWVsZHNPbklucHV0VHlwZShkZWxldGVQb3N0SW5wdXQsIFsnZGlmZmVyZW50MyddKTtcbn0pO1xuXG50ZXN0KCdUZXN0IG5vbiBtb2RlbCBvYmplY3RzIGNvbnRhaW4gaWQgYXMgYSB0eXBlIGZvciBmaWVsZHMnLCAoKSA9PiB7XG4gIGNvbnN0IHZhbGlkU2NoZW1hID0gYFxuICAgIHR5cGUgUG9zdCBAbW9kZWwge1xuICAgICAgaWQ6IElEIVxuICAgICAgY29tbWVudHM6IFtDb21tZW50XVxuICAgIH1cbiAgICB0eXBlIENvbW1lbnQge1xuICAgICAgaWQ6IFN0cmluZyFcbiAgICAgIHRleHQ6IFN0cmluZyFcbiAgICB9XG4gIGA7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gbmV3IEdyYXBoUUxUcmFuc2Zvcm0oe1xuICAgIHRyYW5zZm9ybWVyczogW25ldyBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIoKV0sXG4gIH0pO1xuICBjb25zdCBvdXQgPSB0cmFuc2Zvcm1lci50cmFuc2Zvcm0odmFsaWRTY2hlbWEpO1xuICBleHBlY3Qob3V0KS50b0JlRGVmaW5lZCgpO1xuICBjb25zdCBkZWZpbml0aW9uID0gb3V0LnNjaGVtYTtcbiAgZXhwZWN0KGRlZmluaXRpb24pLnRvQmVEZWZpbmVkKCk7XG4gIGNvbnN0IHBhcnNlZCA9IHBhcnNlKGRlZmluaXRpb24pO1xuICBjb25zdCBjb21tZW50SW5wdXQgPSBnZXRJbnB1dFR5cGUocGFyc2VkLCAnQ29tbWVudElucHV0Jyk7XG4gIGV4cGVjdEZpZWxkc09uSW5wdXRUeXBlKGNvbW1lbnRJbnB1dCwgWydpZCcsICd0ZXh0J10pO1xuICBjb25zdCBjb21tZW50T2JqZWN0ID0gZ2V0T2JqZWN0VHlwZShwYXJzZWQsICdDb21tZW50Jyk7XG4gIGNvbnN0IGNvbW1lbnRJbnB1dE9iamVjdCA9IGdldElucHV0VHlwZShwYXJzZWQsICdDb21tZW50SW5wdXQnKTtcbiAgY29uc3QgY29tbWVudE9iamVjdElERmllbGQgPSBnZXRGaWVsZE9uT2JqZWN0VHlwZShjb21tZW50T2JqZWN0LCAnaWQnKTtcbiAgY29uc3QgY29tbWVudElucHV0SURGaWVsZCA9IGdldEZpZWxkT25JbnB1dFR5cGUoY29tbWVudElucHV0T2JqZWN0LCAnaWQnKTtcbiAgdmVyaWZ5TWF0Y2hpbmdUeXBlcyhjb21tZW50T2JqZWN0SURGaWVsZC50eXBlLCBjb21tZW50SW5wdXRJREZpZWxkLnR5cGUpO1xufSk7XG5cbnRlc3QoJ1Rlc3Qgc2NoZW1hIGluY2x1ZGVzIGF0dHJpYnV0ZSBlbnVtIHdoZW4gb25seSBxdWVyaWVzIHNwZWNpZmllZCcsICgpID0+IHtcbiAgY29uc3QgdmFsaWRTY2hlbWEgPSBgXG4gICAgdHlwZSBFbnRpdHkgQG1vZGVsKG11dGF0aW9uczogbnVsbCwgc3Vic2NyaXB0aW9uczogbnVsbCkge1xuICAgICAgaWQ6IElEIVxuICAgICAgc3RyOiBTdHJpbmdcbiAgICB9XG4gIGA7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gbmV3IEdyYXBoUUxUcmFuc2Zvcm0oe1xuICAgIHRyYW5zZm9ybWVyczogW25ldyBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIoKV0sXG4gICAgdHJhbnNmb3JtQ29uZmlnOiB7XG4gICAgICBWZXJzaW9uOiA1LFxuICAgIH0sXG4gIH0pO1xuICBjb25zdCByZXN1bHQgPSB0cmFuc2Zvcm1lci50cmFuc2Zvcm0odmFsaWRTY2hlbWEpO1xuICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICBleHBlY3QocmVzdWx0LnNjaGVtYSkudG9CZURlZmluZWQoKTtcbiAgZXhwZWN0KHJlc3VsdC5zY2hlbWEpLnRvTWF0Y2hTbmFwc2hvdCgpO1xufSk7XG5cbnRlc3QoJ1Rlc3Qgb25seSBnZXQgZG9lcyBub3QgZ2VuZXJhdGUgc3VwZXJmbHVvdXMgaW5wdXQgYW5kIGZpbHRlciB0eXBlcycsICgpID0+IHtcbiAgY29uc3QgdmFsaWRTY2hlbWEgPSBgXG4gIHR5cGUgRW50aXR5IEBtb2RlbChtdXRhdGlvbnM6IG51bGwsIHN1YnNjcmlwdGlvbnM6IG51bGwsIHF1ZXJpZXM6IHtnZXQ6IFwiZ2V0RW50aXR5XCJ9KSB7XG4gICAgaWQ6IElEIVxuICAgIHN0cjogU3RyaW5nXG4gIH1cbiAgYDtcbiAgY29uc3QgdHJhbnNmb3JtZXIgPSBuZXcgR3JhcGhRTFRyYW5zZm9ybSh7XG4gICAgdHJhbnNmb3JtZXJzOiBbbmV3IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lcigpXSxcbiAgICB0cmFuc2Zvcm1Db25maWc6IHtcbiAgICAgIFZlcnNpb246IDUsXG4gICAgfSxcbiAgfSk7XG4gIGNvbnN0IHJlc3VsdCA9IHRyYW5zZm9ybWVyLnRyYW5zZm9ybSh2YWxpZFNjaGVtYSk7XG4gIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gIGV4cGVjdChyZXN1bHQuc2NoZW1hKS50b0JlRGVmaW5lZCgpO1xuICBleHBlY3QocmVzdWx0LnNjaGVtYSkudG9NYXRjaFNuYXBzaG90KCk7XG59KTtcblxudGVzdCgnVGVzdCB0aW1lc3RhbXAgcGFyYW1ldGVycyB3aGVuIGdlbmVyYXRpbmcgcmVzb2x2ZXJzIGFuZCBvdXRwdXQgc2NoZW1hJywgKCkgPT4ge1xuICBjb25zdCB2YWxpZFNjaGVtYSA9IGBcbiAgdHlwZSBQb3N0IEBtb2RlbCh0aW1lc3RhbXBzOiB7IGNyZWF0ZWRBdDogXCJjcmVhdGVkT25cIiwgdXBkYXRlZEF0OiBcInVwZGF0ZWRPblwifSkge1xuICAgIGlkOiBJRCFcbiAgICBzdHI6IFN0cmluZ1xuICB9XG4gIGA7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gbmV3IEdyYXBoUUxUcmFuc2Zvcm0oe1xuICAgIHRyYW5zZm9ybWVyczogW25ldyBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIoKV0sXG4gIH0pO1xuICBjb25zdCByZXN1bHQgPSB0cmFuc2Zvcm1lci50cmFuc2Zvcm0odmFsaWRTY2hlbWEpO1xuICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICBleHBlY3QocmVzdWx0LnNjaGVtYSkudG9CZURlZmluZWQoKTtcbiAgZXhwZWN0KHJlc3VsdC5zY2hlbWEpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuXG4gIGV4cGVjdChyZXN1bHQucmVzb2x2ZXJzWydNdXRhdGlvbi5jcmVhdGVQb3N0LnJlcS52dGwnXSkudG9NYXRjaFNuYXBzaG90KCk7XG4gIGV4cGVjdChyZXN1bHQucmVzb2x2ZXJzWydNdXRhdGlvbi51cGRhdGVQb3N0LnJlcS52dGwnXSkudG9NYXRjaFNuYXBzaG90KCk7XG59KTtcblxudGVzdCgnVGVzdCByZXNvbHZlciB0ZW1wbGF0ZSBub3QgdG8gYXV0byBnZW5lcmF0ZSBjcmVhdGVkQXQgYW5kIHVwZGF0ZWRBdCB3aGVuIHRoZSB0eXBlIGluIHNjaGVtYSBpcyBub3QgQVdTRGF0ZVRpbWUnLCAoKSA9PiB7XG4gIGNvbnN0IHZhbGlkU2NoZW1hID0gYFxuICB0eXBlIFBvc3QgQG1vZGVsIHtcbiAgICBpZDogSUQhXG4gICAgc3RyOiBTdHJpbmdcbiAgICBjcmVhdGVkQXQ6IEFXU1RpbWVzdGFtcFxuICAgIHVwZGF0ZWRBdDogQVdTVGltZXN0YW1wXG4gIH1cbiAgYDtcbiAgY29uc3QgdHJhbnNmb3JtZXIgPSBuZXcgR3JhcGhRTFRyYW5zZm9ybSh7XG4gICAgdHJhbnNmb3JtZXJzOiBbbmV3IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lcigpXSxcbiAgfSk7XG4gIGNvbnN0IHJlc3VsdCA9IHRyYW5zZm9ybWVyLnRyYW5zZm9ybSh2YWxpZFNjaGVtYSk7XG4gIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gIGV4cGVjdChyZXN1bHQuc2NoZW1hKS50b0JlRGVmaW5lZCgpO1xuICBleHBlY3QocmVzdWx0LnNjaGVtYSkudG9NYXRjaFNuYXBzaG90KCk7XG5cbiAgZXhwZWN0KHJlc3VsdC5yZXNvbHZlcnNbJ011dGF0aW9uLmNyZWF0ZVBvc3QucmVxLnZ0bCddKS50b01hdGNoU25hcHNob3QoKTtcbiAgZXhwZWN0KHJlc3VsdC5yZXNvbHZlcnNbJ011dGF0aW9uLnVwZGF0ZVBvc3QucmVxLnZ0bCddKS50b01hdGNoU25hcHNob3QoKTtcbn0pO1xuXG50ZXN0KCdUZXN0IGNyZWF0ZSBhbmQgdXBkYXRlIG11dGF0aW9uIGlucHV0IHNob3VsZCBoYXZlIHRpbWVzdGFtcHMgYXMgbnVsbGFibGUgZmllbGRzIHdoZW4gdGhlIHR5cGUgbWFrZXMgaXQgbm9uLW51bGxhYmxlJywgKCkgPT4ge1xuICBjb25zdCB2YWxpZFNjaGVtYSA9IGBcbiAgdHlwZSBQb3N0IEBtb2RlbCB7XG4gICAgaWQ6IElEIVxuICAgIHN0cjogU3RyaW5nXG4gICAgY3JlYXRlZEF0OiBBV1NEYXRlVGltZSFcbiAgICB1cGRhdGVkQXQ6IEFXU0RhdGVUaW1lIVxuICB9XG4gIGA7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gbmV3IEdyYXBoUUxUcmFuc2Zvcm0oe1xuICAgIHRyYW5zZm9ybWVyczogW25ldyBEeW5hbW9EQk1vZGVsVHJhbnNmb3JtZXIoKV0sXG4gIH0pO1xuICBjb25zdCByZXN1bHQgPSB0cmFuc2Zvcm1lci50cmFuc2Zvcm0odmFsaWRTY2hlbWEpO1xuICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICBleHBlY3QocmVzdWx0LnNjaGVtYSkudG9CZURlZmluZWQoKTtcbiAgZXhwZWN0KHJlc3VsdC5zY2hlbWEpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuXG4gIGV4cGVjdChyZXN1bHQucmVzb2x2ZXJzWydNdXRhdGlvbi5jcmVhdGVQb3N0LnJlcS52dGwnXSkudG9NYXRjaFNuYXBzaG90KCk7XG4gIGV4cGVjdChyZXN1bHQucmVzb2x2ZXJzWydNdXRhdGlvbi51cGRhdGVQb3N0LnJlcS52dGwnXSkudG9NYXRjaFNuYXBzaG90KCk7XG59KTtcblxudGVzdCgnVGVzdCBub3QgdG8gaW5jbHVkZSBjcmVhdGVkQXQgYW5kIHVwZGF0ZWRBdCBmaWVsZCB3aGVuIHRpbWVzdGFtcHMgaXMgc2V0IHRvIG51bGwnLCAoKSA9PiB7XG4gIGNvbnN0IHZhbGlkU2NoZW1hID0gYFxuICB0eXBlIFBvc3QgQG1vZGVsKHRpbWVzdGFtcHM6IG51bGwpIHtcbiAgICBpZDogSUQhXG4gICAgc3RyOiBTdHJpbmdcbiAgfVxuICBgO1xuICBjb25zdCB0cmFuc2Zvcm1lciA9IG5ldyBHcmFwaFFMVHJhbnNmb3JtKHtcbiAgICB0cmFuc2Zvcm1lcnM6IFtuZXcgRHluYW1vREJNb2RlbFRyYW5zZm9ybWVyKCldLFxuICB9KTtcbiAgY29uc3QgcmVzdWx0ID0gdHJhbnNmb3JtZXIudHJhbnNmb3JtKHZhbGlkU2NoZW1hKTtcbiAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgZXhwZWN0KHJlc3VsdC5zY2hlbWEpLnRvQmVEZWZpbmVkKCk7XG4gIGV4cGVjdChyZXN1bHQuc2NoZW1hKS50b01hdGNoU25hcHNob3QoKTtcblxuICBleHBlY3QocmVzdWx0LnJlc29sdmVyc1snTXV0YXRpb24uY3JlYXRlUG9zdC5yZXEudnRsJ10pLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICBleHBlY3QocmVzdWx0LnJlc29sdmVyc1snTXV0YXRpb24udXBkYXRlUG9zdC5yZXEudnRsJ10pLnRvTWF0Y2hTbmFwc2hvdCgpO1xufSk7XG5cbnRlc3QoYFYke1RSQU5TRk9STV9CQVNFX1ZFUlNJT059IHRyYW5zZm9ybWVyIHNuYXBzaG90IHRlc3RgLCAoKSA9PiB7XG4gIGNvbnN0IHNjaGVtYSA9IHRyYW5zZm9ybWVyVmVyc2lvblNuYXBzaG90KFRSQU5TRk9STV9CQVNFX1ZFUlNJT04pO1xuICBleHBlY3Qoc2NoZW1hKS50b01hdGNoU25hcHNob3QoKTtcbn0pO1xuXG50ZXN0KGBWNSB0cmFuc2Zvcm1lciBzbmFwc2hvdCB0ZXN0YCwgKCkgPT4ge1xuICBjb25zdCBzY2hlbWEgPSB0cmFuc2Zvcm1lclZlcnNpb25TbmFwc2hvdCg1KTtcbiAgZXhwZWN0KHNjaGVtYSkudG9NYXRjaFNuYXBzaG90KCk7XG59KTtcblxudGVzdChgQ3VycmVudCB2ZXJzaW9uIHRyYW5zZm9ybWVyIHNuYXBzaG90IHRlc3RgLCAoKSA9PiB7XG4gIGNvbnN0IHNjaGVtYSA9IHRyYW5zZm9ybWVyVmVyc2lvblNuYXBzaG90KFRSQU5TRk9STV9DVVJSRU5UX1ZFUlNJT04pO1xuICBleHBlY3Qoc2NoZW1hKS50b01hdGNoU25hcHNob3QoKTtcbn0pO1xuXG5mdW5jdGlvbiB0cmFuc2Zvcm1lclZlcnNpb25TbmFwc2hvdCh2ZXJzaW9uOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCB2YWxpZFNjaGVtYSA9IGBcbiAgICAgICAgdHlwZSBQb3N0IEBtb2RlbFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6IElEIVxuICAgICAgICAgIGNvbnRlbnQ6IFN0cmluZ1xuICAgICAgICB9XG4gICAgYDtcbiAgY29uc3QgdHJhbnNmb3JtZXIgPSBuZXcgR3JhcGhRTFRyYW5zZm9ybSh7XG4gICAgdHJhbnNmb3JtZXJzOiBbbmV3IER5bmFtb0RCTW9kZWxUcmFuc2Zvcm1lcigpXSxcbiAgICB0cmFuc2Zvcm1Db25maWc6IHtcbiAgICAgIFZlcnNpb246IHZlcnNpb24sXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3Qgb3V0ID0gdHJhbnNmb3JtZXIudHJhbnNmb3JtKHZhbGlkU2NoZW1hKTtcbiAgZXhwZWN0KG91dCkudG9CZURlZmluZWQoKTtcblxuICByZXR1cm4gb3V0LnNjaGVtYTtcbn1cblxuZnVuY3Rpb24gZXhwZWN0RmllbGRzKHR5cGU6IE9iamVjdFR5cGVEZWZpbml0aW9uTm9kZSwgZmllbGRzOiBzdHJpbmdbXSkge1xuICBmb3IgKGNvbnN0IGZpZWxkTmFtZSBvZiBmaWVsZHMpIHtcbiAgICBjb25zdCBmb3VuZEZpZWxkID0gdHlwZS5maWVsZHMuZmluZCgoZjogRmllbGREZWZpbml0aW9uTm9kZSkgPT4gZi5uYW1lLnZhbHVlID09PSBmaWVsZE5hbWUpO1xuICAgIGV4cGVjdChmb3VuZEZpZWxkKS50b0JlRGVmaW5lZCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV4cGVjdEZpZWxkc09uSW5wdXRUeXBlKHR5cGU6IElucHV0T2JqZWN0VHlwZURlZmluaXRpb25Ob2RlLCBmaWVsZHM6IHN0cmluZ1tdKSB7XG4gIGZvciAoY29uc3QgZmllbGROYW1lIG9mIGZpZWxkcykge1xuICAgIGNvbnN0IGZvdW5kRmllbGQgPSB0eXBlLmZpZWxkcy5maW5kKChmOiBJbnB1dFZhbHVlRGVmaW5pdGlvbk5vZGUpID0+IGYubmFtZS52YWx1ZSA9PT0gZmllbGROYW1lKTtcbiAgICBleHBlY3QoZm91bmRGaWVsZCkudG9CZURlZmluZWQoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRGaWVsZE9uSW5wdXRUeXBlKHR5cGU6IElucHV0T2JqZWN0VHlwZURlZmluaXRpb25Ob2RlLCBmaWVsZDogc3RyaW5nKTogSW5wdXRWYWx1ZURlZmluaXRpb25Ob2RlIHtcbiAgcmV0dXJuIHR5cGUuZmllbGRzLmZpbmQoKGY6IElucHV0VmFsdWVEZWZpbml0aW9uTm9kZSkgPT4gZi5uYW1lLnZhbHVlID09PSBmaWVsZCk7XG59XG5cbmZ1bmN0aW9uIGdldEZpZWxkT25PYmplY3RUeXBlKHR5cGU6IE9iamVjdFR5cGVEZWZpbml0aW9uTm9kZSwgZmllbGQ6IHN0cmluZyk6IEZpZWxkRGVmaW5pdGlvbk5vZGUge1xuICByZXR1cm4gdHlwZS5maWVsZHMuZmluZCgoZjogRmllbGREZWZpbml0aW9uTm9kZSkgPT4gZi5uYW1lLnZhbHVlID09PSBmaWVsZCk7XG59XG5cbmZ1bmN0aW9uIGRvTm90RXhwZWN0RmllbGRzKHR5cGU6IE9iamVjdFR5cGVEZWZpbml0aW9uTm9kZSwgZmllbGRzOiBzdHJpbmdbXSkge1xuICBmb3IgKGNvbnN0IGZpZWxkTmFtZSBvZiBmaWVsZHMpIHtcbiAgICBleHBlY3QodHlwZS5maWVsZHMuZmluZCgoZjogRmllbGREZWZpbml0aW9uTm9kZSkgPT4gZi5uYW1lLnZhbHVlID09PSBmaWVsZE5hbWUpKS50b0JlVW5kZWZpbmVkKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0T2JqZWN0VHlwZShkb2M6IERvY3VtZW50Tm9kZSwgdHlwZTogc3RyaW5nKTogT2JqZWN0VHlwZURlZmluaXRpb25Ob2RlIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIGRvYy5kZWZpbml0aW9ucy5maW5kKChkZWY6IERlZmluaXRpb25Ob2RlKSA9PiBkZWYua2luZCA9PT0gS2luZC5PQkpFQ1RfVFlQRV9ERUZJTklUSU9OICYmIGRlZi5uYW1lLnZhbHVlID09PSB0eXBlKSBhc1xuICAgIHwgT2JqZWN0VHlwZURlZmluaXRpb25Ob2RlXG4gICAgfCB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGdldElucHV0VHlwZShkb2M6IERvY3VtZW50Tm9kZSwgdHlwZTogc3RyaW5nKTogSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbk5vZGUgfCB1bmRlZmluZWQge1xuICByZXR1cm4gZG9jLmRlZmluaXRpb25zLmZpbmQoKGRlZjogRGVmaW5pdGlvbk5vZGUpID0+IGRlZi5raW5kID09PSBLaW5kLklOUFVUX09CSkVDVF9UWVBFX0RFRklOSVRJT04gJiYgZGVmLm5hbWUudmFsdWUgPT09IHR5cGUpIGFzXG4gICAgfCBJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uTm9kZVxuICAgIHwgdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiB2ZXJpZnlJbnB1dENvdW50KGRvYzogRG9jdW1lbnROb2RlLCB0eXBlOiBzdHJpbmcsIGNvdW50OiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIGRvYy5kZWZpbml0aW9ucy5maWx0ZXIoZGVmID0+IGRlZi5raW5kID09PSBLaW5kLklOUFVUX09CSkVDVF9UWVBFX0RFRklOSVRJT04gJiYgZGVmLm5hbWUudmFsdWUgPT09IHR5cGUpLmxlbmd0aCA9PSBjb3VudDtcbn1cblxuZnVuY3Rpb24gdmVyaWZ5TWF0Y2hpbmdUeXBlcyh0MTogVHlwZU5vZGUsIHQyOiBUeXBlTm9kZSk6IGJvb2xlYW4ge1xuICBpZiAodDEua2luZCAhPT0gdDIua2luZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh0MS5raW5kICE9PSBLaW5kLk5BTUVEX1RZUEUgJiYgdDIua2luZCAhPT0gS2luZC5OQU1FRF9UWVBFKSB7XG4gICAgdmVyaWZ5TWF0Y2hpbmdUeXBlcyh0MS50eXBlLCB0Mi50eXBlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiJdfQ==