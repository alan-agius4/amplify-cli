b7d44e8433a9b0cbb92dfd0df11dbfb7
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SyncUtils = void 0;

const cloudform_types_1 = require("cloudform-types");

const graphql_transformer_common_1 = require("graphql-transformer-common");

var SyncUtils;

(function (SyncUtils) {
  function createSyncTable() {
    return new cloudform_types_1.DynamoDB.Table({
      TableName: joinWithEnv('-', [graphql_transformer_common_1.SyncResourceIDs.syncTableName, cloudform_types_1.Fn.GetAtt(graphql_transformer_common_1.ResourceConstants.RESOURCES.GraphQLAPILogicalID, 'ApiId')]),
      AttributeDefinitions: [{
        AttributeName: graphql_transformer_common_1.SyncResourceIDs.syncPrimaryKey,
        AttributeType: 'S'
      }, {
        AttributeName: graphql_transformer_common_1.SyncResourceIDs.syncRangeKey,
        AttributeType: 'S'
      }],
      KeySchema: [{
        AttributeName: graphql_transformer_common_1.SyncResourceIDs.syncPrimaryKey,
        KeyType: 'HASH'
      }, {
        AttributeName: graphql_transformer_common_1.SyncResourceIDs.syncRangeKey,
        KeyType: 'RANGE'
      }],
      BillingMode: 'PAY_PER_REQUEST',
      TimeToLiveSpecification: syncTTLConfig()
    });
  }

  SyncUtils.createSyncTable = createSyncTable;

  function createSyncIAMRole() {
    const roleName = graphql_transformer_common_1.SyncResourceIDs.syncIAMRoleName;
    return new cloudform_types_1.IAM.Role({
      RoleName: joinWithEnv('-', [roleName, cloudform_types_1.Fn.GetAtt(graphql_transformer_common_1.ResourceConstants.RESOURCES.GraphQLAPILogicalID, 'ApiId')]),
      AssumeRolePolicyDocument: {
        Version: '2012-10-17',
        Statement: [{
          Effect: 'Allow',
          Principal: {
            Service: 'appsync.amazonaws.com'
          },
          Action: 'sts:AssumeRole'
        }]
      },
      Policies: [new cloudform_types_1.IAM.Role.Policy({
        PolicyName: 'DynamoDBAccess',
        PolicyDocument: {
          Version: '2012-10-17',
          Statement: [{
            Effect: 'Allow',
            Action: ['dynamodb:BatchGetItem', 'dynamodb:BatchWriteItem', 'dynamodb:PutItem', 'dynamodb:DeleteItem', 'dynamodb:GetItem', 'dynamodb:Scan', 'dynamodb:Query', 'dynamodb:UpdateItem'],
            Resource: [cloudform_types_1.Fn.Sub('arn:aws:dynamodb:${AWS::Region}:${AWS::AccountId}:table/${tablename}', {
              tablename: graphql_transformer_common_1.SyncResourceIDs.syncTableName
            }), cloudform_types_1.Fn.Sub('arn:aws:dynamodb:${AWS::Region}:${AWS::AccountId}:table/${tablename}/*', {
              tablename: graphql_transformer_common_1.SyncResourceIDs.syncTableName
            })]
          }]
        }
      })]
    });
  }

  SyncUtils.createSyncIAMRole = createSyncIAMRole;

  function syncLambdaArnResource({
    name,
    region
  }) {
    const env = 'env;';
    const substitutions = {};

    if (referencesEnv(name)) {
      substitutions[env] = cloudform_types_1.Fn.Ref(graphql_transformer_common_1.ResourceConstants.PARAMETERS.Env);
    }

    return cloudform_types_1.Fn.If(graphql_transformer_common_1.ResourceConstants.CONDITIONS.HasEnvironmentParameter, cloudform_types_1.Fn.Sub(lambdaArnKey(name, region), substitutions), cloudform_types_1.Fn.Sub(lambdaArnKey(removeEnvReference(name), region), {}));
  }

  SyncUtils.syncLambdaArnResource = syncLambdaArnResource;

  function lambdaArnKey(name, region) {
    return region ? `arn:aws:lambda:${region}:\${AWS::AccountId}:function:${name}` : `arn:aws:lambda:\${AWS::Region}:\${AWS::AccountId}:function:${name}`;
  }

  SyncUtils.lambdaArnKey = lambdaArnKey;

  function referencesEnv(value) {
    return value.match(/(\${env})/) !== null;
  }

  function removeEnvReference(value) {
    return value.replace(/(-\${env})/, '');
  }

  function joinWithEnv(separator, listToJoin) {
    return cloudform_types_1.Fn.If(graphql_transformer_common_1.ResourceConstants.CONDITIONS.HasEnvironmentParameter, cloudform_types_1.Fn.Join(separator, [...listToJoin, cloudform_types_1.Fn.Ref(graphql_transformer_common_1.ResourceConstants.PARAMETERS.Env)]), cloudform_types_1.Fn.Join(separator, listToJoin));
  }

  function syncLambdaIAMRole({
    name,
    region
  }) {
    return new cloudform_types_1.IAM.Role({
      RoleName: cloudform_types_1.Fn.If(graphql_transformer_common_1.ResourceConstants.CONDITIONS.HasEnvironmentParameter, cloudform_types_1.Fn.Join('-', [name.slice(0, 26), cloudform_types_1.Fn.GetAtt(graphql_transformer_common_1.ResourceConstants.RESOURCES.GraphQLAPILogicalID, 'ApiId'), cloudform_types_1.Fn.Ref(graphql_transformer_common_1.ResourceConstants.PARAMETERS.Env)]), cloudform_types_1.Fn.Join('-', [name.slice(0, 37), cloudform_types_1.Fn.GetAtt(graphql_transformer_common_1.ResourceConstants.RESOURCES.GraphQLAPILogicalID, 'ApiId')])),
      AssumeRolePolicyDocument: {
        Version: '2012-10-17',
        Statement: [{
          Effect: 'Allow',
          Principal: {
            Service: 'appsync.amazonaws.com'
          },
          Action: 'sts:AssumeRole'
        }]
      },
      Policies: [{
        PolicyName: 'InvokeLambdaFunction',
        PolicyDocument: {
          Version: '2012-10-17',
          Statement: [{
            Effect: 'Allow',
            Action: ['lambda:InvokeFunction'],
            Resource: syncLambdaArnResource({
              name,
              region
            })
          }]
        }
      }]
    });
  }

  SyncUtils.syncLambdaIAMRole = syncLambdaIAMRole;

  function createSyncLambdaIAMPolicy({
    name,
    region
  }) {
    return new cloudform_types_1.IAM.Role.Policy({
      PolicyName: 'InvokeLambdaFunction',
      PolicyDocument: {
        Version: '2012-10-17',
        Statement: [{
          Effect: 'Allow',
          Action: ['lambda:InvokeFunction'],
          Resource: syncLambdaArnResource({
            name,
            region
          })
        }]
      }
    });
  }

  SyncUtils.createSyncLambdaIAMPolicy = createSyncLambdaIAMPolicy;

  function syncTTLConfig() {
    return {
      AttributeName: '_ttl',
      Enabled: true
    };
  }

  SyncUtils.syncTTLConfig = syncTTLConfig;

  function syncDataSourceConfig() {
    return {
      DeltaSyncTableName: joinWithEnv('-', [graphql_transformer_common_1.SyncResourceIDs.syncTableName, cloudform_types_1.Fn.GetAtt(graphql_transformer_common_1.ResourceConstants.RESOURCES.GraphQLAPILogicalID, 'ApiId')]),
      DeltaSyncTableTTL: 30,
      BaseTableTTL: 43200
    };
  }

  SyncUtils.syncDataSourceConfig = syncDataSourceConfig;

  function syncResolverConfig(syncConfig) {
    const resolverObj = {
      ConflictDetection: syncConfig.ConflictDetection,
      ConflictHandler: syncConfig.ConflictHandler
    };

    if (isLambdaSyncConfig(syncConfig)) {
      resolverObj.LambdaConflictHandlerArn = syncLambdaArnResource(syncConfig.LambdaConflictHandler);
    }

    return resolverObj;
  }

  SyncUtils.syncResolverConfig = syncResolverConfig;

  function isLambdaSyncConfig(obj) {
    const lambbdaConfigKey = 'LambdaConflictHandler';

    if (obj && obj.ConflictHandler === 'LAMBDA') {
      if (obj.hasOwnProperty(lambbdaConfigKey)) {
        return true;
      }

      throw Error(`Invalid Lambda SyncConfig`);
    }

    return false;
  }

  SyncUtils.isLambdaSyncConfig = isLambdaSyncConfig;
})(SyncUtils = exports.SyncUtils || (exports.SyncUtils = {}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3N5bmNVdGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsTUFBQSxpQkFBQSxHQUFBLE9BQUEsQ0FBQSxpQkFBQSxDQUFBOztBQUNBLE1BQUEsNEJBQUEsR0FBQSxPQUFBLENBQUEsNEJBQUEsQ0FBQTs7QUFlQSxJQUFjLFNBQWQ7O0FBQUEsQ0FBQSxVQUFjLFNBQWQsRUFBdUI7QUFDckIsV0FBZ0IsZUFBaEIsR0FBK0I7QUFDN0IsV0FBTyxJQUFJLGlCQUFBLENBQUEsUUFBQSxDQUFTLEtBQWIsQ0FBbUI7QUFDeEIsTUFBQSxTQUFTLEVBQUUsV0FBVyxDQUFDLEdBQUQsRUFBTSxDQUFDLDRCQUFBLENBQUEsZUFBQSxDQUFnQixhQUFqQixFQUFnQyxpQkFBQSxDQUFBLEVBQUEsQ0FBRyxNQUFILENBQVUsNEJBQUEsQ0FBQSxpQkFBQSxDQUFrQixTQUFsQixDQUE0QixtQkFBdEMsRUFBMkQsT0FBM0QsQ0FBaEMsQ0FBTixDQURFO0FBRXhCLE1BQUEsb0JBQW9CLEVBQUUsQ0FDcEI7QUFDRSxRQUFBLGFBQWEsRUFBRSw0QkFBQSxDQUFBLGVBQUEsQ0FBZ0IsY0FEakM7QUFFRSxRQUFBLGFBQWEsRUFBRTtBQUZqQixPQURvQixFQUtwQjtBQUNFLFFBQUEsYUFBYSxFQUFFLDRCQUFBLENBQUEsZUFBQSxDQUFnQixZQURqQztBQUVFLFFBQUEsYUFBYSxFQUFFO0FBRmpCLE9BTG9CLENBRkU7QUFZeEIsTUFBQSxTQUFTLEVBQUUsQ0FDVDtBQUNFLFFBQUEsYUFBYSxFQUFFLDRCQUFBLENBQUEsZUFBQSxDQUFnQixjQURqQztBQUVFLFFBQUEsT0FBTyxFQUFFO0FBRlgsT0FEUyxFQUtUO0FBQ0UsUUFBQSxhQUFhLEVBQUUsNEJBQUEsQ0FBQSxlQUFBLENBQWdCLFlBRGpDO0FBRUUsUUFBQSxPQUFPLEVBQUU7QUFGWCxPQUxTLENBWmE7QUFzQnhCLE1BQUEsV0FBVyxFQUFFLGlCQXRCVztBQXVCeEIsTUFBQSx1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